/*! jQuery userTimeout - v0.3.0 - 2016-05-13
* https://github.com/lleblanc42/jquery-userTimeout
* Copyright (c) 2016 Luke LeBlanc; Licensed GPL-3.0 */
!function(a,b,c,d){"use strict";a.fn.userTimeout=function(d){var e,f,g,h,i={logouturl:null,referer:!1,refererName:"refer",notify:!0,timer:!0,session:6e5,force:3e5,ui:"auto",debug:!1,modalTitle:"Session Timeout",modalBody:"You're being timed out due to inactivity. Please choose to stay signed in or to logoff. Otherwise, you will logged off automatically."},j=a.extend(i,d||{}),k=Math.floor(j.force/1e3%60),l=function(){return clearTimeout(f),j.logouturl?(e=m(j.ui),void(e!==!1&&(p(!1),a(b).on("focus click mousemove mousedown keyup scroll keypress",function(){p(!1)})))):void(j.debug===!0?c.alert("Please configure the userTimeout plugin!"):c.console.error("Please configure the userTimeout plugin!"))},m=function(b){switch(b){case"auto":if("function"==typeof a().emulateTransitionEnd)b="bootstrap";else{if("undefined"==typeof jQuery.ui)return j.debug===!0?c.alert("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;b="jqueryui"}break;case"bootstrap":if("function"!=typeof a().emulateTransitionEnd)return j.debug===!0?c.alert("Twitter Bootstrap 3 was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("Twitter Bootstrap 3 was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;b="bootstrap";break;case"jqueryui":if("undefined"==typeof jQuery.ui)return j.debug===!0?c.alert("jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1;b="jqueryui";break;default:return j.debug===!0?c.alert("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"):c.console.error("Twitter Bootstrap 3 nor jQueryUI was not found! Please load the proper libraries and their themes to utilize this plugin!"),!1}return b},n=function(){if(p(!0),"bootstrap"===e){var c,d,f,g,h,i,l;c=a('<div class="modal fade" id="notifyLogout" tabindex="-1" role="dialog" aria-labelledby="notifyLogoutLabel" aria-hidden="true"></div>'),d=a('<div class="modal-dialog"></div>'),f=a('<div class="modal-content"></div>'),g=a('<div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title" id="notifyLogoutLabel">'+j.modalTitle+"</h4></div>"),h=a('<div class="modal-body">'+j.modalBody+"</div>"),j.timer===!0?(i=a('<div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">Stay Logged In (<span id="countdowntimer">'+k+"</span>)</button></div>"),o(k)):i=a('<div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">Stay Logged In</button></div>'),l=a('<button type="button" class="btn btn-default" id="logoff">Log Off</button>'),f.append(g,h,i),i.prepend(l),d.append(f),c.append(d),a(c).modal({backdrop:"static",keyboard:!1,show:!0}),a(c).on("hide.bs.modal",function(){p(!1),a(b).on("focus click mousemove mousedown keyup scroll keypress",function(){p(!1)}),a(c).remove()}),a(l).on("click",function(){q()})}else if("jqueryui"===e){var m,n={},r='<div id="notifyLogout"><p>'+j.modalBody+"</p></div>";n["Stay Logged In"]=function(){p(!1),a(b).on("focus click mousemove mousedown keyup scroll keypress",function(){p(!1)}),m.dialog("close")},n["Log Off"]=function(){q()},m=a(r).dialog({buttons:n,modal:!0,width:600,height:300,resizable:!1,title:j.modalTitle})}},o=function(b){a("#countdowntimer").html(b),0!==b?h=setTimeout(function(){b-=1,o(b)},1e3):clearTimeout(h)},p=function(a){clearTimeout(f),clearTimeout(g),clearTimeout(h),a===!0?g=setTimeout(q,j.force):f=j.notify===!0?setTimeout(n,j.session):setTimeout(q,j.session)},q=function(){var b;if(clearTimeout(f),clearTimeout(g),clearTimeout(h),j.referer!==!1)if("auto"===j.referer){var d=a(location).attr("href");b=j.logouturl+"?"+encodeURIComponent(j.refererName)+"="+encodeURIComponent(d)}else b=j.logouturl+"?"+encodeURIComponent(j.refererName)+"="+encodeURIComponent(j.referer);else b=j.logouturl;return c.location=b};return this.each(function(){l()})}}(jQuery,document,window);